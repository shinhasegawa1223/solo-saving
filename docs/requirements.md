# 要件定義書 (Requirements Document)

## 1. プロジェクト概要
個人用資産管理アプリケーション「Solo Saving」。
日本株、米国株、インデックスファンド、現金を一元管理し、資産状況を可視化するWebシステム。

## 2. 管理対象資産
以下の4カテゴリーの資産を管理対象とする。

### 2.1 現金 (Cash)
- **通貨**: 日本円 (JPY)、英ポンド (GBP)、米ドル (USD) など複数通貨に対応。
- **為替レート**: リアルタイム性の高い無料のファイナンスAPIを使用してUSD, GBP等のレートを取得すること。
- **情報**:
    - 残高
    - 通貨種別

### 2.2 日本株 (Japanese Stocks)
- **情報**:
    - 証券コード (Ticker)
    - 銘柄名
    - 保有株数
    - 平均取得単価
    - 現在値 (Market Price)
    - 損益 (Unrealized P/L)

### 2.3 米国株 (US Stocks)
- **情報**:
    - ティッカーシンボル (Ticker)
    - 銘柄名
    - 保有株数
    - 平均取得単価 (USD)
    - 現在値 (USD)
    - 為替レート考慮後の円換算評価額

### 2.4 インデックス / 投資信託 (Indices / Mutual Funds)
- **主な対象**: S&P500, 全世界株式 (All Country), その他インデックスファンド。
- **情報**:
    - ファンド名
    - 保有口数 または 投資金額
    - 現在の評価額
    - 損益

## 3. 機能要件

### 3.1 ダッシュボード機能
- **総資産表示**: 全資産の合計額 (日本円換算)。
- **日次推移グラフ**: DB設計において日ごとの資産残高を記録し、グラフ描画できるようにすること。
- **ポートフォリオ円グラフ**:資産クラス別 (現金/株/投信)、銘柄別の構成比率を表示。
- **資産推移チャート**: 時系列での資産増減をグラフ化 (Line Chart / Area Chart)。
- **為替レート表示**: JPY/GBP, JPY/USD 等の参考レート。

### 3.2 資産管理機能 (CRUD)
- 各資産カテゴリごとの登録・編集・削除・一覧表示。
- **手動更新**: 株式等はモーダル等で入力。購入時のUSD価格なども自己申告（手入力）とする。
- **自動取得**:
    - **為替レート**: 外部APIを用いてリアルタイムに取得。
    - **株価**: API連携は行わない（手動管理）。

### 3.3 取引履歴 (Transaction History)
- 入金、出金、購入、売却の記録 (MVPでは任意、フェーズ2以降で本格実装も検討)。
- 現時点では「現在の保有残高」の管理 (Stock型) を優先し、フロー管理は簡素化する。

### 3.4 認証機能
- 今回は実装しない (将来的な検討事項としてCognito/OAuthを考慮のみしておく)。

## 4. 非機能要件
- **デバイス**: PCでの閲覧を前提とする (レスポンシブ対応は不要)。
- **セキュリティ**: 認証機能は実装しないが、将来の拡張（Cognito/OAuth）を想定した設計とする。
- **パフォーマンス**: SPA (Single Page Application) による高速な画面遷移。

## 5. 技術スタック (Confirmed)
- **Frontend**: Next.js
- **Backend**: FastAPI
- **Database**: PostgreSQL
- **Runtime**: Bun
- **Tools**: Biome, Ruff
